<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>liblightmodbus: Building liblightmodbus</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">liblightmodbus
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">A lightweight, cross-platform Modbus RTU library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Building liblightmodbus </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>In order to build the library CMake 3.3 or newer is required. Versions up to 1.3 used script-based build system, no longer maintained as of version 1.4. For more information see <a class="el" href="building-old.html">Using old, proprietary build system</a>.</dd></dl>
<p>The library's build configuration process is pretty complex, as the library consists of many modules that can be included in the build or omitted. If you want to go with default configuration first, take a look at the section below.</p>
<h2>Default build configuration</h2>
<ol type="1">
<li><code>mkdir build</code> - Create a new directory for build environment</li>
<li><code>cmake ..</code> - Run CMake with no additional flags</li>
<li><code>make all</code> - Build the library</li>
</ol>
<h2>Custom build</h2>
<p>The only difference between default and customized builds are the arguments passed to CMake.</p>
<p>The <code>MODULES</code> CMake variable determines what library modules and functionalities are going to be included during the build process. It should take value of desired module names list, separated with semicolons (and no spaces!). See below for list of available modules along with short descriptions:</p><ul>
<li><code>SLAVE_BASE</code> - slave basic feature set (required by all other slave-related modules)</li>
<li><code>F01S</code> - slave support for Modbus function 01</li>
<li><code>F02S</code> - slave support for Modbus function 02</li>
<li><code>F03S</code> - slave support for Modbus function 03</li>
<li><code>F04S</code> - slave support for Modbus function 04</li>
<li><code>F05S</code> - slave support for Modbus function 05</li>
<li><code>F06S</code> - slave support for Modbus function 06</li>
<li><code>F15S</code> - slave support for Modbus function 15</li>
<li><code>F16S</code> - slave support for Modbus function 16</li>
<li><code>F22S</code> - slave support for Modbus function 22</li>
<li><code>MASTER_BASE</code> - master basic feature set (required by all other master-related modules)</li>
<li><code>F01M</code> - master support for Modbus function 01</li>
<li><code>F02M</code> - master support for Modbus function 02</li>
<li><code>F03M</code> - master support for Modbus function 03</li>
<li><code>F04M</code> - master support for Modbus function 04• F05M - master support for Modbus function 05</li>
<li><code>F06M</code> - master support for Modbus function 06</li>
<li><code>F15M</code> - master support for Modbus function 15</li>
<li><code>F16M</code> - master support for Modbus function 16</li>
<li><code>F22M</code> - master support for Modbus function 22</li>
<li><code>SLAVE_USER_FUNCTIONS</code> - support for user-defined Modbus functions on slave side (see <a class="el" href="user-functions.html">User-defined Modbus functions</a>)</li>
<li><code>MASTER_USER_FUNCTIONS</code> - support for user-defined Modbus functions on master side (see <a class="el" href="user-functions.html">User-defined Modbus functions</a>)</li>
<li><code>REGISTER_CALLBACK</code> - slave register callback function (see <a class="el" href="register-callback.html">User-defined Modbus register callback function</a>)</li>
<li><code>COIL_CALLBACK</code> - slave coil callback function (see <a class="el" href="register-callback.html">User-defined Modbus register callback function</a>)</li>
<li><code>NO_MASTER_DATA_BUFFER</code> - disable exclusive master’s processed data buffer (see <a class="el" href="advanced-configuration.html">Advanced configuration</a>)</li>
<li><code>MASTER_INVASIVE_PARSING</code> - allow master to modify received frame (use with <code>NO_MASTER_DATA_BUFFER</code>)</li>
<li><code>EXPERIMENTAL</code> - enable experimental features</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>If you don't specify any modules during configuration, these default modules are going to be included: <code>SLAVE_BASE;F01S;F02S;F03S;F04S;F05S;F06S;F15S;F16S;F22S;SLAVE_USER_FUNCTIONS;MASTER_BASE;F01M;F02M;F03M;F04M;F05M; F06M;F15M;F16M;F22M;MASTER_USER_FUNCTIONS</code>.</dd></dl>
<h3>Disabling dynamic memory allocation</h3>
<p>Liblightmodbus can work without dynamic memory allocation. See <a class="el" href="static-mem.html">Disabling dynamic memory allocation</a> for more information.</p>
<h3>Setting endianness</h3>
<p>Modbus is strictly big-endian protocol. That means you have to specify target system endianness when building. By default, CMake will check your system endianness and apply that setting, but in order to override it, set <code>ENDIANNESS</code> CMake variable to either "big" or "little".</p>
<h3>Building for AVR</h3>
<p>Building the library for AVR microcontrollers is pretty easy thanks to the <code>AVR</code> CMake variable. If you want to build for AVR, just add <code>-DAVR=&lt;part&gt;</code> argument to the CMake invocation, where <code>&lt;part&gt;</code> is the target microcontroller type (for instance <code>atmega328</code>).</p>
<h3>Debug and release builds</h3>
<p>In order to specify build type - debug or release, set <code>CMAKE_BUILD_TYPE</code> to either <code>Debug</code> or <code>Release</code>.</p>
<h3>Changing compiler and linker</h3>
<p>To change used compiler and linker, adjust these CMake variables: <code>CMAKE_C_COMPILER</code>, <code>CMAKE_LINKER</code>.</p>
<h3>Coverage testing</h3>
<p>Even though it's probably not what you want to do, you can enable coverage test build by setting <code>COVERAGE_TEST</code> variable to 1.</p>
<h3>Library configuration file</h3>
<p>During the build process, a special library configuration header file - <code><a class="el" href="libconf_8h.html">include/lightmodbus/libconf.h</a></code> is created. It contains macros describing current library configuration. Names of these macros correspond to CMake configuration variable names.</p>
<p>If you know, what you are doing you can edit this file manually, however keep in mind that the library will need rebuilding after making any changes. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
